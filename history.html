<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>搜尋紀錄 - 明察秋毫</title>
    <link rel="stylesheet" href="明察秋毫.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>📜 搜尋紀錄</h1>
            <p><a href="index.html" class="back-link">返回搜尋頁</a></p>
        </header>

        <div class="history-page">
            <ul class="history-list"></ul>
            <button class="clear-history">清除全部紀錄</button>
        </div>
    </div>

    <script>
        const historyList = document.querySelector('.history-list');
        const clearBtn = document.querySelector('.clear-history');

        let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];

        renderHistory();

        function renderHistory() {
            historyList.innerHTML = '';
            if (searchHistory.length === 0) {
                historyList.innerHTML = '<li class="no-history">目前沒有搜尋紀錄</li>';
                return;
            }
            searchHistory.forEach(term => {
                const li = document.createElement('li');
                li.textContent = term;
                li.title = '點擊以返回搜尋該關鍵字';
                li.addEventListener('click', () => {
                    window.location.href = `index.html?search=${encodeURIComponent(term)}`;
                });

                const delBtn = document.createElement('button');
                delBtn.textContent = '✖';
                delBtn.className = 'delete-btn';
                delBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    searchHistory = searchHistory.filter(t => t !== term);
                    localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
                    renderHistory();
                });

                li.appendChild(delBtn);
                historyList.appendChild(li);
            });
        }

        clearBtn.addEventListener('click', () => {
            if (confirm('確定要清除所有搜尋紀錄嗎？')) {
                searchHistory = [];
                localStorage.removeItem('searchHistory');
                renderHistory();
            }
        });
    </script>
</body>
</html>
